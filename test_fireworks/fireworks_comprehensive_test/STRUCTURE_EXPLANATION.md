# üìä –°–¢–†–£–ö–¢–£–†–ê –û–¢–í–ï–¢–ê FIREWORKS API

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ `timestamp_granularities: ["word", "segment"]`

```json
{
  "task": "transcribe",
  "language": "ru",
  "text": "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏...",
  "segments": [...],  // ‚≠ê –ú–∞—Å—Å–∏–≤ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  "words": [...]      // ‚≠ê –ú–∞—Å—Å–∏–≤ –í–°–ï–• —Å–ª–æ–≤
}
```

---

## 1Ô∏è‚É£ –ú–ê–°–°–ò–í SEGMENTS (—Å–µ–≥–º–µ–Ω—Ç—ã —Ä–µ—á–∏)

```json
{
  "segments": [
    {
      "id": 0,
      "text": "–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –Ø –Ω–∞ –≤–µ–≥—É. –ö–∞–∫ –¥–µ–ª–∞? ...",
      "start": 4.958,           // ‚ö†Ô∏è start = end (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ!)
      "end": 4.958,             // ‚ö†Ô∏è start = end (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ!)
      "audio_start": 4.958,     // ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –Ω–∞—á–∞–ª–æ
      "audio_end": 28.466,      // ‚úÖ –†–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω–µ—Ü
      "words": [                // –°–ª–æ–≤–∞ –í–ù–£–¢–†–ò —ç—Ç–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
        {
          "word": "–ü—Ä–∏–≤–µ—Ç!",
          "start": 4.958,       // ‚ö†Ô∏è –í—Å–µ —Å–ª–æ–≤–∞ = —Ç–∞–π–º–∏–Ω–≥ —Å–µ–≥–º–µ–Ω—Ç–∞
          "end": 4.958,
          "probability": 0.700,
          "hallucination_score": 0.0
        },
        {
          "word": "–î–æ–±—Ä–æ–µ",
          "start": 4.958,       // ‚ö†Ô∏è –¢–µ –∂–µ —Ç–∞–π–º–∏–Ω–≥–∏!
          "end": 4.958,
          "probability": 0.700,
          "hallucination_score": 1.0
        }
        // ... –µ—â—ë 25 —Å–ª–æ–≤ —Å —Ç–∞–∫–∏–º–∏ –∂–µ —Ç–∞–π–º–∏–Ω–≥–∞–º–∏ 4.958s
      ]
    },
    {
      "id": 1,
      "text": "–ü—Ä–æ –≥–æ—Ä–æ–¥—Å–∫–æ–π –ø–∞—Ä–∫, –¥–∞, —Å –æ—Ç–≤–µ—Ç–æ–º –Ω–µ —Å–æ—à–ª–æ—Å—å...",
      "start": 29.849,
      "end": 29.849,
      "audio_start": 29.849,
      "audio_end": 37.359,
      "words": [
        // 18 —Å–ª–æ–≤, –≤—Å–µ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º 29.849s
      ]
    }
    // ... –µ—â—ë 85 —Å–µ–≥–º–µ–Ω—Ç–æ–≤
  ]
}
```

---

## 2Ô∏è‚É£ –ú–ê–°–°–ò–í WORDS (–≤—Å–µ —Å–ª–æ–≤–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏)

```json
{
  "words": [
    // –°–ª–æ–≤–∞ –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–∞ 0 (27 —Å–ª–æ–≤):
    {"word": "–ü—Ä–∏–≤–µ—Ç!", "start": 4.958, "end": 4.958},
    {"word": "–î–æ–±—Ä–æ–µ",  "start": 4.958, "end": 4.958},
    {"word": "—É—Ç—Ä–æ!",   "start": 4.958, "end": 4.958},
    // ... –µ—â—ë 24 —Å–ª–æ–≤–∞ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º 4.958s
    
    // –°–ª–æ–≤–∞ –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–∞ 1 (18 —Å–ª–æ–≤):
    {"word": "–ü—Ä–æ",       "start": 29.849, "end": 29.849},
    {"word": "–≥–æ—Ä–æ–¥—Å–∫–æ–π", "start": 29.849, "end": 29.849},
    // ... –µ—â—ë 16 —Å–ª–æ–≤ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º 29.849s
    
    // ... –∏—Ç–æ–≥–æ 3708 —Å–ª–æ–≤
  ]
}
```

---

## üîç –ö–õ–Æ–ß–ï–í–´–ï –ù–ê–ë–õ–Æ–î–ï–ù–ò–Ø:

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–æ–≤–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º

**–í—Å–µ —Å–ª–æ–≤–∞ –≤ –æ–¥–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ –∏–º–µ—é—Ç –û–î–ò–ù–ê–ö–û–í–´–ï —Ç–∞–π–º–∏–Ω–≥–∏** (—Ç–∞–π–º–∏–Ω–≥ —Å–µ–≥–º–µ–Ω—Ç–∞):

```
–°–µ–≥–º–µ–Ω—Ç 0 [4.958s - 28.466s]:
  - "–ü—Ä–∏–≤–µ—Ç!"  [4.958s - 4.958s]  ‚Üê –≤—Å–µ —Å–ª–æ–≤–∞
  - "–î–æ–±—Ä–æ–µ"   [4.958s - 4.958s]  ‚Üê –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π
  - "—É—Ç—Ä–æ!"    [4.958s - 4.958s]  ‚Üê —Ç–∞–π–º–∏–Ω–≥ 4.958s
  - ... (–µ—â—ë 24 —Å–ª–æ–≤–∞)

–°–µ–≥–º–µ–Ω—Ç 1 [29.849s - 37.359s]:
  - "–ü—Ä–æ"      [29.849s - 29.849s]  ‚Üê –≤—Å–µ —Å–ª–æ–≤–∞
  - "–≥–æ—Ä–æ–¥—Å–∫–æ–π"[29.849s - 29.849s]  ‚Üê –∏–º–µ—é—Ç —Ç–∞–π–º–∏–Ω–≥ 29.849s
  - ... (–µ—â—ë 16 —Å–ª–æ–≤)
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ø–æ –ª—É—á—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
  vad_model: whisperx-pyannet
  alignment_model: mms_fa
  preprocessing: soft_dynamic
  prompt: full
  temperature: 0.0

–†–µ–∑—É–ª—å—Ç–∞—Ç:
  - –í—Å–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤: 87
  - –í—Å–µ–≥–æ —Å–ª–æ–≤: 3708
  - –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤ (–ø–µ—Ä–≤—ã–µ 100 —Å–ª–æ–≤): 15/100
  
  –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–≤—ã—Ö 50 —Å–ª–æ–≤:
    –ì—Ä—É–ø–ø–∞ 1: 27 —Å–ª–æ–≤ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º 4.958s
    –ì—Ä—É–ø–ø–∞ 2: 18 —Å–ª–æ–≤ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º 29.849s
    –ì—Ä—É–ø–ø–∞ 3: 5 —Å–ª–æ–≤ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º 39.046s
    ... (–µ—â—ë ~12 –≥—Ä—É–ø–ø)
```

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:

1. ‚úÖ **–ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –Ω–∞ ~5 —Å–µ–∫—É–Ω–¥–µ** (4.958s) - –ø—Ä–∞–≤–∏–ª—å–Ω–æ!
2. ‚úÖ **–°–µ–≥–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `audio_start` –∏ `audio_end`**
3. ‚úÖ **–¢–µ–∫—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** ("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ", –∞ –Ω–µ "–ü—Ä–æ–µ —É—Ç—Ä–æ")
4. ‚úÖ **–°–ª–æ–≤–∞ —Ä–∞–∑–±–∏—Ç—ã –∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –æ—Ç–≤–µ—Ç–µ**

---

## ‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

1. ‚ùå **Word-level —Ç–∞–π–º–∏–Ω–≥–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º**
   - –í—Å–µ —Å–ª–æ–≤–∞ –≤ —Å–µ–≥–º–µ–Ω—Ç–µ –ø–æ–ª—É—á–∞—é—Ç –û–î–ò–ù–ê–ö–û–í–´–ô —Ç–∞–π–º–∏–Ω–≥ (—Ç–∞–π–º–∏–Ω–≥ —Å–µ–≥–º–µ–Ω—Ç–∞)
   - –ù–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞
   
2. ‚ùå **`start` = `end` –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ–≤**
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏—è —Å–ª–æ–≤–∞
   
3. ‚ùå **–í—ã—Å–æ–∫–∏–π `hallucination_score`**
   - 87% —Å–ª–æ–≤ –∏–º–µ—é—Ç `hallucination_score=1.0`
   - –ù–æ —ç—Ç–æ –ù–ï –æ–∑–Ω–∞—á–∞–µ—Ç –æ—à–∏–±–∫—É –≤ —Ç–µ–∫—Å—Ç–µ!

---

## üí° –í–´–í–û–î–´:

### –° `alignment_model="mms_fa"`:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ –Ω–∞—á–∞–ª–∞ (~5s, –∞ –Ω–µ 20s)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- ‚ùå **–ù–ï–¢ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö word-level —Ç–∞–π–º–∏–Ω–≥–æ–≤**
- ‚ùå –°–ª–æ–≤–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º (15-87 –≥—Ä—É–ø–ø –≤–º–µ—Å—Ç–æ 3708 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö)

### –° `alignment_model="tdnn_ffn"`:
- ‚ùå –°–¥–≤–∏–≥ —Ç–∞–π–º–∏–Ω–≥–æ–≤ (~20s –≤–º–µ—Å—Ç–æ 5s)
- ‚ùå "–£–∂–∏–º–∞–Ω–∏–µ" –≤—Ä–µ–º–µ–Ω–∏ (–Ω–µ—Ç–æ—á–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏)
- ‚úÖ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ word-level —Ç–∞–π–º–∏–Ω–≥–∏** (100/100 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö)
- ‚úÖ –ö–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –∏–º–µ–µ—Ç —Å–≤–æ–π start –∏ end

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:

**Fireworks API —Å `mms_fa` –ù–ï –î–ê–ï–¢ –Ω–∞—Å—Ç–æ—è—â–∏—Ö word-level —Ç–∞–π–º–∏–Ω–≥–æ–≤.**

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã **–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞**, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- **WhisperX** (—Å Montreal Forced Aligner)
- **Whisper.cpp** —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `--max-len 1`
- **–î—Ä—É–≥–∏–µ —Ä–µ—à–µ–Ω–∏—è —Å forced alignment**

–ï—Å–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ **—Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö —Ç–∞–π–º–∏–Ω–≥–æ–≤**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mms_fa` - –æ–Ω –¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `audio_start` –∏ `audio_end` —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤

